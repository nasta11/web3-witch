<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WitchWeb3 ‚Äî AI Tarot of the Digital Witch</title>
  <meta name="description" content="–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è AI-–∫–æ–ª–æ–¥–∞ –≤–µ–¥—å–º—ã Web3. –í—ã—Ç—è–Ω–∏ –∫–∞—Ä—Ç—É —Å—É–¥—å–±—ã –∏ –ø–æ–∑–Ω–∞–π —ç–Ω–µ—Ä–≥–∏—é –∫–æ–¥–∞ –∏ –º–∞–≥–∏–∏.">
  <link rel="icon" href="cards/moon.png" />

  <style>
    body {
      margin: 0;
      padding: 0;
      background: radial-gradient(circle at center, #0c0014 20%, #000);
      color: #e9dffb;
      font-family: "Courier New", monospace;
      text-align: center;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    h1 {
      font-size: 28px;
      color: #e3caff;
      text-shadow: 0 0 10px #a020f0;
    }

    p {
      font-size: 16px;
      line-height: 1.5;
      max-width: 500px;
      margin: 10px auto;
    }

    button {
      background: #a020f0;
      border: none;
      color: #fff;
      padding: 12px 24px;
      margin: 10px;
      border-radius: 12px;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s, transform 0.2s;
    }

    button:hover {
      background: #c040ff;
      transform: scale(1.05);
    }

    .tarot-card {
      width: 180px;
      height: 260px;
      background: linear-gradient(135deg, #2b0b45, #7c33a3);
      border-radius: 16px;
      box-shadow: 0 0 20px rgba(162, 0, 255, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 48px;
      margin: 20px auto;
      transition: transform 1s, box-shadow 0.5s;
      transform-style: preserve-3d;
      perspective: 800px;
      position: relative;
      overflow: visible;
    }

    .tarot-card.flipped { transform: rotateY(180deg); }
    .tarot-card.glow { box-shadow: 0 0 40px #ff00ff, 0 0 80px #c040ff; }

    /* ‚ú® –ú–∞–≥–∏—á–µ—Å–∫–∞—è –ø—ã–ª—å ‚ú® */
    .particle {
      position: absolute;
      width: 6px;
      height: 6px;
      background: radial-gradient(circle, #ffb6ff, transparent);
      border-radius: 50%;
      opacity: 0;
      animation: sparkle 1.5s ease-out forwards;
    }

    @keyframes sparkle {
      0% { transform: scale(0.5) translateY(0); opacity: 1; }
      50% { transform: scale(1.2) translateY(-20px); opacity: 1; }
      100% { transform: scale(0.2) translateY(-40px); opacity: 0; }
    }

    .lang-switch {
      position: absolute;
      top: 20px;
      right: 20px;
      background: #a020f0;
      color: white;
      border-radius: 8px;
      padding: 6px 10px;
      font-size: 14px;
      cursor: pointer;
      user-select: none;
    }

    footer {
      margin-top: 30px;
      font-size: 13px;
      color: #b999e8;
    }

    a {
      color: #d48aff;
      text-decoration: none;
      margin: 0 6px;
    }

    a:hover { text-decoration: underline; }
  </style>
</head>

<body>
  <div class="lang-switch" id="langSwitch">EN üá¨üáß</div>

  <section class="tarot-section" id="content">
    <h1>WitchWeb3 ‚Äî AI-–∫–æ–ª–æ–¥–∞ –≤–µ–¥—å–º—ã Web3</h1>
    <p>–í—ã—Ç—è–Ω–∏ –∫–∞—Ä—Ç—É –∏ —É–∑–Ω–∞–π, —á—Ç–æ –∂–¥—ë—Ç —Ç–≤–æ—é —Ü–∏—Ñ—Ä–æ–≤—É—é –¥—É—à—É üîÆ</p>

    <button id="connectWallet">–ü–æ–¥–∫–ª—é—á–∏—Ç—å MetaMask</button>
    <div id="card" class="tarot-card">üÉè</div>
    <button id="drawCard">–í—ã—Ç—è–Ω—É—Ç—å –∫–∞—Ä—Ç—É</button>
    <p id="status"></p>
    <p id="txLink"></p>
  </section>

  <footer>
    <div>
      <a href="https://t.me/NastaKasi" target="_blank">Telegram</a> ‚Ä¢
      <a href="https://github.com/nasta11/web3-mystic-meme-tarot" target="_blank">GitHub</a> ‚Ä¢
      <a href="https://www.instagram.com/Anastasia.vitae" target="_blank">Instagram</a>
    </div>
    <div>¬© WitchWeb3 2025 ‚Ä¢ contact@witchweb3.com</div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/ethers@6.8.1/dist/ethers.umd.min.js"></script>
  <script>
    // üåê –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–æ–≤
    const langSwitch = document.getElementById("langSwitch");
    const content = document.getElementById("content");
    let lang = "ru";

    const texts = {
      ru: {
        title: "WitchWeb3 ‚Äî AI-–∫–æ–ª–æ–¥–∞ –≤–µ–¥—å–º—ã Web3",
        desc: "–í—ã—Ç—è–Ω–∏ –∫–∞—Ä—Ç—É –∏ —É–∑–Ω–∞–π, —á—Ç–æ –∂–¥—ë—Ç —Ç–≤–æ—é —Ü–∏—Ñ—Ä–æ–≤—É—é –¥—É—à—É üîÆ",
        connect: "–ü–æ–¥–∫–ª—é—á–∏—Ç—å MetaMask",
        draw: "–í—ã—Ç—è–Ω—É—Ç—å –∫–∞—Ä—Ç—É"
      },
      en: {
        title: "WitchWeb3 ‚Äî The AI Tarot of the Digital Witch",
        desc: "Draw your card and see what awaits your digital soul üîÆ",
        connect: "Connect MetaMask",
        draw: "Draw a Card"
      }
    };

    langSwitch.addEventListener("click", () => {
      lang = lang === "ru" ? "en" : "ru";
      const t = texts[lang];
      document.querySelector("h1").innerText = t.title;
      document.querySelector("p").innerText = t.desc;
      document.getElementById("connectWallet").innerText = t.connect;
      document.getElementById("drawCard").innerText = t.draw;
      langSwitch.innerText = lang === "ru" ? "EN üá¨üáß" : "RU üá∑üá∫";
    });

    // ‚ú® –ú–∞–≥–∏—á–µ—Å–∫–∞—è –ø—ã–ª—å
    function createParticles(container) {
      for (let i = 0; i < 12; i++) {
        const p = document.createElement('div');
        p.className = 'particle';
        const angle = Math.random() * 2 * Math.PI;
        const radius = 40 + Math.random() * 30;
        p.style.left = 90 + Math.cos(angle) * radius + 'px';
        p.style.top = 130 + Math.sin(angle) * radius + 'px';
        p.style.animationDelay = (Math.random() * 0.6) + 's';
        container.appendChild(p);
        setTimeout(() => p.remove(), 1500);
      }
    }

    // ü™Ñ Web3 –ª–æ–≥–∏–∫–∞
    const CONTRACT_ADDRESS = "0xYOUR_CONTRACT_ADDRESS"; // –≤—Å—Ç–∞–≤—å —Å–≤–æ–π –∞–¥—Ä–µ—Å
    const ABI = [
      "function mint(uint256 qty) payable",
      "function price() view returns (uint256)"
    ];
    const provider = new ethers.BrowserProvider(window.ethereum);
    let signer;

    const card = document.getElementById("card");
    const connectBtn = document.getElementById("connectWallet");
    const drawBtn = document.getElementById("drawCard");
    const statusText = document.getElementById("status");
    const txLink = document.getElementById("txLink");

    connectBtn.addEventListener("click", async () => {
      try {
        await window.ethereum.request({ method: "eth_requestAccounts" });
        signer = await provider.getSigner();
        const addr = await signer.getAddress();
        connectBtn.innerText = `üîó ${addr.slice(0, 6)}...${addr.slice(-4)}`;
        connectBtn.disabled = true;
        statusText.innerText = lang === "ru" ? "–ì–æ—Ç–æ–≤–æ! –ú–æ–∂–Ω–æ –≤—ã—Ç—è–≥–∏–≤–∞—Ç—å –∫–∞—Ä—Ç—É." : "Ready! You can draw a card.";
      } catch (e) {
        statusText.innerText = lang === "ru" ? "MetaMask –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω." : "MetaMask not connected.";
      }
    });

    async function drawCard() {
      if (!signer) return alert(lang === "ru" ? "–ü–æ–¥–∫–ª—é—á–∏ MetaMask —Å–Ω–∞—á–∞–ª–∞!" : "Please connect MetaMask first!");
      try {
        statusText.innerText = lang === "ru" ? "‚ú® –í—ã—Ç—è–≥–∏–≤–∞–µ–º –∫–∞—Ä—Ç—É..." : "‚ú® Drawing your card...";
        drawBtn.disabled = true;
        const contract = new ethers.Contract(CONTRACT_ADDRESS, ABI, signer);
        const price = await contract.price();
        const tx = await contract.mint(1, { value: price });
        const receipt = await tx.wait();
        statusText.innerText = lang === "ru" ? "üîÆ –ö–∞—Ä—Ç–∞ –≤—ã—Ç—è–Ω—É—Ç–∞!" : "üîÆ Card drawn!";
        txLink.innerHTML = `<a href=\"https://sepolia.etherscan.io/tx/${receipt.hash}\" target=\"_blank\">Etherscan</a>`;
        animateCard();
      } catch (e) {
        console.error(e);
        statusText.innerText = "–û—à–∏–±–∫–∞: " + e.message;
      } finally {
        drawBtn.disabled = false;
      }
    }

    function animateCard() {
      card.classList.add("flipped", "glow");
      createParticles(card);
      setTimeout(() => card.classList.remove("glow"), 2000);
    }

    drawBtn.addEventListener("click", drawCard);

    // –°–≤–∞–π–ø –≤–≤–µ—Ä—Ö
    let touchStartY = 0;
    document.addEventListener("touchstart", e => touchStartY = e.touches[0].clientY);
    document.addEventListener("touchend", e => {
      const endY = e.changedTouches[0].clientY;
      if (touchStartY - endY > 50) drawCard();
    });
  </script>
</body>
</html>

